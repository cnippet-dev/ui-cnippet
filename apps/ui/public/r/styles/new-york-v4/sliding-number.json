{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "dependencies": ["motion", "react-use-measure"],
  "files": [
    {
      "content": "\"use client\";\r\nimport { useEffect, useId } from \"react\";\r\nimport {\r\n  MotionValue,\r\n  motion,\r\n  useSpring,\r\n  useTransform,\r\n  motionValue,\r\n} from \"motion/react\";\r\nimport useMeasure from \"react-use-measure\";\r\n\r\nconst TRANSITION = {\r\n  type: \"spring\" as const,\r\n  stiffness: 280,\r\n  damping: 18,\r\n  mass: 0.3,\r\n};\r\n\r\nfunction Digit({ value, place }: { value: number; place: number }) {\r\n  const valueRoundedToPlace = Math.floor(value / place) % 10;\r\n  const initial = motionValue(valueRoundedToPlace);\r\n  const animatedValue = useSpring(initial, TRANSITION);\r\n\r\n  useEffect(() => {\r\n    animatedValue.set(valueRoundedToPlace);\r\n  }, [animatedValue, valueRoundedToPlace]);\r\n\r\n  return (\r\n    <div className=\"relative inline-block w-[1ch] overflow-x-visible overflow-y-clip leading-none tabular-nums\">\r\n      <div className=\"invisible\">0</div>\r\n      {Array.from({ length: 10 }, (_, i) => (\r\n        <Number key={i} mv={animatedValue} number={i} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Number({ mv, number }: { mv: MotionValue<number>; number: number }) {\r\n  const uniqueId = useId();\r\n  const [ref, bounds] = useMeasure();\r\n\r\n  const y = useTransform(mv, (latest) => {\r\n    if (!bounds.height) return 0;\r\n    const placeValue = latest % 10;\r\n    const offset = (10 + number - placeValue) % 10;\r\n    let memo = offset * bounds.height;\r\n\r\n    if (offset > 5) {\r\n      memo -= 10 * bounds.height;\r\n    }\r\n\r\n    return memo;\r\n  });\r\n\r\n  // don't render the animated number until we know the height\r\n  if (!bounds.height) {\r\n    return (\r\n      <span ref={ref} className=\"invisible absolute\">\r\n        {number}\r\n      </span>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <motion.span\r\n      style={{ y }}\r\n      layoutId={`${uniqueId}-${number}`}\r\n      className=\"absolute inset-0 flex items-center justify-center\"\r\n      transition={TRANSITION}\r\n      ref={ref}\r\n    >\r\n      {number}\r\n    </motion.span>\r\n  );\r\n}\r\n\r\ntype SlidingNumberProps = {\r\n  value: number;\r\n  padStart?: boolean;\r\n  decimalSeparator?: string;\r\n};\r\n\r\nexport function SlidingNumber({\r\n  value,\r\n  padStart = false,\r\n  decimalSeparator = \".\",\r\n}: SlidingNumberProps) {\r\n  const absValue = Math.abs(value);\r\n  const [integerPart, decimalPart] = absValue.toString().split(\".\");\r\n  const integerValue = parseInt(integerPart, 10);\r\n  const paddedInteger =\r\n    padStart && integerValue < 10 ? `0${integerPart}` : integerPart;\r\n  const integerDigits = paddedInteger.split(\"\");\r\n  const integerPlaces = integerDigits.map((_, i) =>\r\n    Math.pow(10, integerDigits.length - i - 1)\r\n  );\r\n\r\n  return (\r\n    <div className=\"flex items-center\">\r\n      {value < 0 && \"-\"}\r\n      {integerDigits.map((_, index) => (\r\n        <Digit\r\n          key={`pos-${integerPlaces[index]}`}\r\n          value={integerValue}\r\n          place={integerPlaces[index]}\r\n        />\r\n      ))}\r\n      {decimalPart && (\r\n        <>\r\n          <span>{decimalSeparator}</span>\r\n          {decimalPart.split(\"\").map((_, index) => (\r\n            <Digit\r\n              key={`decimal-${index}`}\r\n              value={parseInt(decimalPart, 10)}\r\n              place={Math.pow(10, decimalPart.length - index - 1)}\r\n            />\r\n          ))}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n",
      "path": "registry/default/motion/sliding-number.tsx",
      "type": "registry:ui"
    }
  ],
  "name": "sliding-number",
  "type": "registry:ui"
}
