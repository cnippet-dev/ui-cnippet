{
  "$schema": "https://ui.cnippet.dev/schema/registry-item.json",
  "name": "v-form-2",
  "type": "registry:block",
  "description": "form",
  "registryDependencies": [
    "form"
  ],
  "files": [
    {
      "path": "registry/default/variants/v-form-2.tsx",
      "content": "\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { z } from \"zod\";\r\n\r\nimport { Button } from \"@/registry/default/ui/button\";\r\nimport { Field, FieldError, FieldLabel } from \"@/registry/default/ui/field\";\r\nimport { Form } from \"@/registry/default/ui/form\";\r\nimport { Input } from \"@/registry/default/ui/input\";\r\n\r\nconst schema = z.object({\r\n  age: z.coerce\r\n    .number({ message: \"Please enter a number.\" })\r\n    .positive({ message: \"Number must be positive.\" }),\r\n  name: z.string().min(1, { message: \"Please enter a name.\" }),\r\n});\r\n\r\ntype Errors = Record<string, string | string[]>;\r\n\r\nasync function submitForm(event: React.FormEvent<HTMLFormElement>) {\r\n  event.preventDefault();\r\n\r\n  const formData = new FormData(event.currentTarget);\r\n  const result = schema.safeParse(Object.fromEntries(formData));\r\n\r\n  if (!result.success) {\r\n    const { fieldErrors } = z.flattenError(result.error);\r\n    return { errors: fieldErrors as Errors };\r\n  }\r\n\r\n  return {\r\n    errors: {} as Errors,\r\n  };\r\n}\r\n\r\nexport default function Particle() {\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [errors, setErrors] = React.useState<Errors>({});\r\n\r\n  const onSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    const formData = new FormData(event.currentTarget);\r\n    setLoading(true);\r\n    const response = await submitForm(event);\r\n    await new Promise((r) => setTimeout(r, 800));\r\n    setErrors(response.errors);\r\n    setLoading(false);\r\n    if (Object.keys(response.errors).length === 0) {\r\n      alert(\r\n        `Name: ${String(formData.get(\"name\") || \"\")}\\nAge: ${String(\r\n          formData.get(\"age\") || \"\",\r\n        )}`,\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Form className=\"max-w-64\" errors={errors} onSubmit={onSubmit}>\r\n      <Field name=\"name\">\r\n        <FieldLabel>Name</FieldLabel>\r\n        <Input disabled={loading} placeholder=\"Enter name\" />\r\n        <FieldError />\r\n      </Field>\r\n      <Field name=\"age\">\r\n        <FieldLabel>Age</FieldLabel>\r\n        <Input disabled={loading} placeholder=\"Enter age\" />\r\n        <FieldError />\r\n      </Field>\r\n      <Button disabled={loading} type=\"submit\">\r\n        Submit\r\n      </Button>\r\n    </Form>\r\n  );\r\n}\r\n",
      "type": "registry:block"
    }
  ],
  "meta": {
    "className": ""
  },
  "categories": [
    "form"
  ]
}